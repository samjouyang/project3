<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VO2 Betting Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .container {
            display: inline-block;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .participant {
            margin: 20px 0;
        }
        .bet-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
        .earnings {
            margin-top: 20px;
            font-size: 20px;
            color: green;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>VO2 Betting Game</h1>
        <div class="participant" id="participant1">
            <h2>Participant 1</h2>
            <p>VO2 Level: <span id="vo2-1">--</span></p>
            <p>Age Range: <span id="age-1">30-39</span></p> <!-- Default age range -->
            <p>Odds: <span id="odds-1">--</span></p> <!-- Odds will be updated -->
            <input type="radio" name="bet-choice" value="1"> Bet on Participant 1
        </div>
        <div class="participant" id="participant2">
            <h2>Participant 2</h2>
            <p>VO2 Level: <span id="vo2-2">--</span></p>
            <p>Age Range: <span id="age-2">30-39</span></p> <!-- Default age range -->
            <p>Odds: <span id="odds-2">--</span></p> <!-- Odds will be updated -->
            <input type="radio" name="bet-choice" value="2"> Bet on Participant 2
        </div>
        <div id="bet-container">
            <input type="number" id="bet-amount" placeholder="Enter bet amount" min="1">
            <button class="bet-button" onclick="placeBet()">Place Bet</button>
        </div>
        <div class="result" id="result"></div>
        <div class="earnings" id="earnings">Earnings: $0</div>
    </div>

    <script>
        const data = [
            { ID: 1, time: 500, VO2: 1705.0, Age_Range: '30-39' },
            { ID: 2, time: 501, VO2: 2262.0, Age_Range: '30-39' },
            { ID: 3, time: 500, VO2: 2615.0, Age_Range: '10-19' },
            { ID: 4, time: 500, VO2: 3120.0, Age_Range: '20-29' }
        ];

        const oddsData = {
            "30-39 vs 10-19": { "30-39": "+107", "10-19": "-132" },
            "30-39 vs 20-29": { "30-39": "+124", "20-29": "-154" },
            "30-39 vs 40-49": { "30-39": "-113", "40-49": "-109" },
            "30-39 vs 50-59": { "30-39": "-160", "50-59": "+129" },
            "10-19 vs 20-29": { "10-19": "+107", "20-29": "-132" },
            "10-19 vs 40-49": { "10-19": "-134", "40-49": "+109" },
            "10-19 vs 50-59": { "10-19": "-192", "50-59": "+153" },
            "20-29 vs 40-49": { "20-29": "-156", "40-49": "+126" },
            "20-29 vs 50-59": { "20-29": "-222", "50-59": "+176" },
            "40-49 vs 50-59": { "40-49": "-153", "50-59": "+123" }
        };

        let earnings = 0;

        function getClosestVO2(participantId) {
            const participantData = data.filter(d => d.ID === participantId);
            return participantData.length ? participantData[0] : null;
        }

        function getRandomParticipants() {
            const participant1 = Math.floor(Math.random() * data.length) + 1;
            let participant2 = Math.floor(Math.random() * data.length) + 1;
            while (participant2 === participant1) {
                participant2 = Math.floor(Math.random() * data.length) + 1;
            }
            return [participant1, participant2];
        }

        function getOdds(ageRange1, ageRange2) {
            const key = `${ageRange1} vs ${ageRange2}`;
            if (oddsData[key]) {
                return oddsData[key];
            } else {
                // Reverse key if order is swapped
                const reverseKey = `${ageRange2} vs ${ageRange1}`;
                if (oddsData[reverseKey]) {
                    return oddsData[reverseKey];
                }
                return null; // No odds found
            }
        }

        function updateParticipants() {
            const [participant1, participant2] = getRandomParticipants();
            
            const participant1Data = getClosestVO2(participant1);
            const participant2Data = getClosestVO2(participant2);

            document.getElementById('vo2-1').textContent = participant1Data.VO2;
            document.getElementById('age-1').textContent = participant1Data.Age_Range;

            document.getElementById('vo2-2').textContent = participant2Data.VO2;
            document.getElementById('age-2').textContent = participant2Data.Age_Range;

            const odds = getOdds(participant1Data.Age_Range, participant2Data.Age_Range);

            if (odds) {
                document.getElementById('odds-1').textContent = odds[participant1Data.Age_Range];
                document.getElementById('odds-2').textContent = odds[participant2Data.Age_Range];
            } else {
                document.getElementById('odds-1').textContent = "--";
                document.getElementById('odds-2').textContent = "--";
            }

            return [participant1, participant2, participant1Data.VO2, participant2Data.VO2];
        }

        function placeBet() {
          // Your existing placeBet logic remains unchanged
          // ...
          updateParticipants(); // Ensure participants and odds are updated
      }

      function newBet() {
          document.getElementById('vo2-1').textContent = "--";
          document.getElementById('vo2-2').textContent = "--";
          document.getElementById('result').textContent = "";
          document.getElementById('bet-container').innerHTML =
              '<input type="number" id="bet-amount" placeholder="Enter bet amount" min="1"> <button class="bet-button" onclick="placeBet()">Place Bet</button>';
      }

      updateParticipants(); // Initialize participants and odds on page load
    </script>
</body>
</html>